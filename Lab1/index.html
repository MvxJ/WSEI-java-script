<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="styles.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
    </head>
    <body>
        
        <div class="calculator">
            <div class="inputs-block">
                <input type="text" class='text-field form-control'>
                <input type="text" class='text-field form-control'>
                <input type="text" class='text-field form-control'>
            </div>
            <p class="results"></p>
            <input type="button" name="add" id="addButton" value="Add more fields" class="btn btn-primary">
            <input type="button" type="submit" value="Calculate" id="button" class="btn btn-primary">
        </div>
        
        <script type="text/javascript">
            const addButton = document.getElementById('addButton');
            const button = document.getElementById("button");

            this.addEvents();

            addButton.addEventListener('click', () => {
                const inputBlock = document.querySelector('.inputs-block');
                const newInput = document.createElement('input');
                newInput.classList.add('text-field');
                newInput.classList.add('form-control');

                inputBlock.appendChild(newInput);

                this.addEvents();
            });

            button.addEventListener('click', () => {
                this.calculate();
            });

            function addEvents()
            {
                const textFields = document.querySelectorAll('.text-field');

                textFields.forEach(field => {
                    field.addEventListener('input', () => {
                        this.calculate();
                    });
                });
            }

            function calculate()
            {
                const inputs = document.querySelectorAll('.text-field');
                const avg = this.avg();
                const sum = this.sum();
                const min = this.getMinFromArray(inputs);
                const max = this.getMaxFromArray(inputs);

                const results = document.querySelector('.results');
                results.innerHTML = "MIN - " + min + " MAX - " + max + " SUM - " + sum + " AVG - " + avg;
            }

            function getMinFromArray(inputs)
            {
                let array = [];

                inputs.forEach(input => {
                    array.push(parseFloat(input.value));
                });

                return Math.min(...array);
            }

            function getMaxFromArray(inputs)
            {
                let array = [];

                inputs.forEach(input => {
                    array.push(input.value);
                });

                return Math.max(...array);
            }

            function sum() {
                const inputs = document.querySelectorAll('.text-field');
                let sum = 0;

                inputs.forEach(input => {
                    const num =  parseFloat(input.value);
                    sum += num;
                });

                return sum;
            }

            function avg() {
                const inputs = document.querySelectorAll('.text-field')

                return sum() / inputs.length;
            }
        </script>    
    </body>
</html>